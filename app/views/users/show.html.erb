<section class="user-section">
	<h2>
	 	<%= "Name: #{@user.name}" %>
		<%= ask_friendship_or(current_user, @user) %>
	</h2>
  <table>
	<tr>
		<th colspan="3" >
			<%= pluralize(@user.friends.count, "friend") %>
		</th>
	</tr>
	<% @user.friends.each do |friend| %>
		<tr>
			<td width="50">
				<%= link_to friend.name, user_path(friend) %>
			</td>
			<td>
				<% if @user == current_user %>
						<%= link_to 'Delete', friendship_path(user_id: current_user, friend_id: friend), method: :delete %>
				<% end %>
			</td>
		</tr>
	<% end %>

	<% unless @user.requested_friends.empty?   %>
		<tr>
			<th colspan="3">
				<%= pluralize(@user.requested_friends.count, "requested friend") %>
			</th>
		</tr>
		<% @user.requested_friends.each do |requester| %>
			<tr>
				<td><%= link_to requester.name, user_path(requester) %></td>
				<td>
					<% if @user == current_user %>
						<%= link_to 'Delete', decline_path(user_id: current_user, friend_id: requester), method: :delete %>/
					<%= link_to 'Accept', friendship_path(user_id: current_user, friend_id: requester), method: :patch %>
					<% end %>
				</td>
			</tr>
		<% end %>
	<% end %>
	<% unless @user.pending_friends.empty? %>
		<tr>
			<th colspan="3">
				<%= pluralize(@user.pending_friends.count, "pending friend") %>
			</th>
		</tr>
		<% @user.pending_friends.each do |pending_friend| %>
			<tr>
				<td>
					<%= link_to pending_friend.name, user_path(pending_friend) %>
				</td>
				<td>
					
					<% if @user == current_user %>
						<%= link_to "Cancel request", cancel_path(user_id: current_user, friend_id: pending_friend), method: :delete %>
					<% end %>
				</td>
			</tr>
		<% end %>
	<% end %>
  </table>

  <article class="timeline">
    <h3>Recent posts:</h3>
    <ul class="posts">
      <%= render @posts %>
    </ul>
  </article>
</section>
